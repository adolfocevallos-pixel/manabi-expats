<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Manabí Expats — Landing Completa</title>
  <meta name="description" content="Acompañamiento integral para ecuatorianos en España que invierten en la costa de Manabí: Manta, Santa Marianita, San Lorenzo y más."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light only">
  <style>html,body{height:100%}</style>
</head>
<body class="bg-white text-slate-800">
  <div id="root"></div>

  <!-- React + ReactDOM UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel (for JSX in-browser) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;
    const { jsPDF } = window.jspdf;

    // ============== COMPONENTE PRINCIPAL ==============
    function ManabiExpatsLanding() {
      // --- Datos de propiedades con Cloudinary y Shorts ---
      const propiedades = [
        {
          id: 'p1',
          title: 'Casas en Urbanización Vittoria en Jaramijó',
          location: 'Jaramijó, Urbanización Vittoria',
          type: 'Casa',
          beds: 3, baths: 2,
          area_m2: 84, lot_m2: 119,
          price: 71990, currency: 'USD',
          status: 'Disponible',
          tags: ['Entrega en 7 meses', 'Reserva 5%', 'Crédito VIS'],
          coverImage: 'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647540/descarga_3_k2wjg1.jpg',
          gallery: [
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647540/descarga_3_k2wjg1.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647540/descarga_3_k2wjg1.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647540/descarga_2_ltft60.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647540/descarga_1_xr7v5v.jpg'
          ],
          videoUrl: 'https://youtube.com/shorts/_y-gey_ku9M?si=q9e_5hFps4B9DWWQ',
          latitude: -0.965, longitude: -80.713,
          notes: 'Se reserva con el 5% y puede aplicar a crédito VIS (95% restante). Las primeras 12 casas se entregan en 7 meses.'
        },
        {
          id: 'p2',
          title: 'Finca operativa en Río Bravo',
          location: 'Río Bravo, a 45 minutos de Manta',
          type: 'Terreno productivo',
          beds: null, baths: null,
          area_m2: null, lot_m2: 740000,
          price: null, currency: 'Precio confidencial',
          status: 'Disponible',
          tags: ['25.000 plantas de plátano', 'Riego por goteo 100%', '3 pozos + 3 reservorios', 'Empaque/almacenaje'],
          coverImage: 'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647660/descarga_7_bwkwsg.jpg',
          gallery: [
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647660/descarga_7_bwkwsg.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647660/descarga_6_txhjrd.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647659/descarga_5_ac1vpg.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756647659/descarga_4_pzjb27.jpg'
          ],
          videoUrl: 'https://youtube.com/shorts/axj_GY9sWzU?si=PsWpmDgnr_HKdHuP',
          latitude: -1.05, longitude: -80.74,
          notes: 'Cobertura total de riego por goteo. Caminos internos conectan toda la propiedad.'
        },
        {
          id: 'p3',
          title: 'Finca operativa en Puerto Cayo',
          location: 'Puerto Cayo, a 50 minutos de Manta',
          type: 'Terreno productivo',
          beds: null, baths: null,
          area_m2: null, lot_m2: 1140000,
          price: null, currency: 'Precio confidencial',
          status: 'Disponible',
          tags: ['Maquinaria incluida', 'Riego por goteo 100%', '3 reservorios', 'Almacenaje/empacado'],
          coverImage: 'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756648031/descarga_11_ytljg9.jpg',
          gallery: [
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756648031/descarga_11_ytljg9.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756648030/descarga_10_gjfixh.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756648029/descarga_9_dqfpki.jpg',
            'https://res.cloudinary.com/dg2ocdcos/image/upload/v1756648029/descarga_8_ywvtw7.jpg'
          ],
          videoUrl: 'https://youtube.com/shorts/fcg1gWT1Mbg?si=NRh99HBAwMeLDWtN',
          latitude: -1.2, longitude: -80.75,
          notes: 'Incluye maquinaria de operación. Caminos internos conectan toda la finca.'
        },
      ];

      // --- Estados UI ---
      const [filtroTipo, setFiltroTipo] = useState('Todos');
      const [filtroPrecio, setFiltroPrecio] = useState('Todos');
      const [busqueda, setBusqueda] = useState('');
      const [seleccionada, setSeleccionada] = useState(null);
      const [mostrarFicha, setMostrarFicha] = useState(false);
      const [slideIndex, setSlideIndex] = useState(0);
      useEffect(() => { setSlideIndex(0); setMostrarFicha(false); }, [seleccionada]);

      // --- Filtros ---
      const listaFiltrada = useMemo(() => {
        return propiedades.filter(p => {
          const byTipo = filtroTipo === 'Todos' || p.type === filtroTipo;
          const byPrecio = (() => {
            if (filtroPrecio === 'Todos') return true;
            if (!p.price) return true;
            const val = Number(p.price || 0);
            if (filtroPrecio === '≤80k') return val <= 80000;
            if (filtroPrecio === '80–150k') return val > 80000 && val <= 150000;
            if (filtroPrecio === '150–300k') return val > 150000 && val <= 300000;
            if (filtroPrecio === '300k+') return val > 300000;
            return true;
          })();
          const bySearch = `${p.title} ${p.location} ${p.type}`.toLowerCase().includes(busqueda.toLowerCase());
          return byTipo && byPrecio && bySearch;
        });
      }, [propiedades, filtroTipo, filtroPrecio, busqueda]);

      // --- Helpers ---
      const formatPrice = (p) => {
        if (!p?.price) return p?.currency || '-';
        const base = new Intl.NumberFormat('es-EC').format(p.price);
        return `$${base} ${p.currency || 'USD'}`;
      };
      const normalizeVideoUrl = (url) => {
        if (!url) return url;
        const m = url.match(/youtube\.com\/shorts\/([^?]+)/);
        if (m) return 'https://www.youtube.com/watch?v=' + m[1];
        return url;
      };
      const renderVideo = (url) => {
        if (!url) return null;
        const isYouTube = /youtu\.be|youtube\.com/.test(url);
        const isVimeo = /vimeo\.com/.test(url);
        const isMp4 = /\.mp4($|\?)/.test(url);
        if (isYouTube) {
          const shortMatch = url.match(/youtube\.com\/shorts\/([^?]+)/);
          const idFromShort = shortMatch ? shortMatch[1] : null;
          const idMatch = url.match(/[?&]v=([^&]+)/) || url.match(/youtu\.be\/([^?]+)/);
          const vid = idFromShort || (idMatch ? idMatch[1] : '');
          return <iframe className="aspect-video w-full" src={`https://www.youtube.com/embed/${vid}`} title="Video de propiedad" allowFullScreen />;
        }
        if (isVimeo) {
          const idMatch = url.match(/vimeo\.com\/(\d+)/);
          const vid = idMatch ? idMatch[1] : '';
          return <iframe className="aspect-video w-full" src={`https://player.vimeo.com/video/${vid}`} title="Video de propiedad" allowFullScreen />;
        }
        if (isMp4) return <video className="aspect-video w-full" controls src={url} />;
        return null;
      };
      const generateQRDataURL = (text, size = 140) => {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.crossOrigin = 'anonymous';
          img.onload = () => {
            const canvas = document.createElement('canvas');
            canvas.width = size; canvas.height = size;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, size, size);
            resolve(canvas.toDataURL('image/png'));
          };
          img.onerror = reject;
          img.src = `https://quickchart.io/qr?size=${size}&text=${encodeURIComponent(text)}`;
        });
      };
      const downloadFichaPDF = async (p) => {
        const doc = new jsPDF();
        doc.setFontSize(16);
        doc.text('Ficha Técnica', 20, 20);
        const waLink = `https://wa.me/34636526898?text=${encodeURIComponent('Hola Adolfo, quiero más detalles de: ' + p.title)}`;
        try {
          const qrDataUrl = await generateQRDataURL(waLink, 140);
          doc.addImage(qrDataUrl, 'PNG', 160, 15, 35, 35);
          doc.setFontSize(10);
          doc.text('Escanéame para chatear', 160, 54);
        } catch {}
        doc.setFontSize(12);
        doc.text(`Propiedad: ${p.title}`, 20, 35);
        doc.text(`Ubicación: ${p.location}`, 20, 45);
        doc.text(`Tipo: ${p.type}`, 20, 55);
        let y = 65;
        if (p.beds || p.baths) { doc.text(`Habitaciones: ${p.beds || '-'} | Baños: ${p.baths || '-'}`, 20, y); y += 10; }
        if (p.area_m2) { doc.text(`Área construcción: ${p.area_m2} m²`, 20, y); y += 10; }
        if (p.lot_m2) { doc.text(`Área terreno: ${p.lot_m2} m²`, 20, y); y += 10; }
        doc.text(`Precio: ${p.price ? formatPrice(p) : p.currency}`, 20, y); y += 10;
        doc.text(`Estado: ${p.status}`, 20, y); y += 10;
        if (p.tags?.length) { doc.text(`Tags: ${p.tags.join(', ')}`, 20, y, { maxWidth: 170 }); y += 10; }
        if (p.notes) { doc.text(`Detalles: ${p.notes}`, 20, y, { maxWidth: 170 }); y += 10; }
        doc.setFontSize(10);
        doc.text('WhatsApp directo:', 20, 280);
        doc.text(waLink, 60, 280);
        doc.text('Contacto: adolfocevallos@gmail.com | +34 636526898', 20, 288);
        doc.save(`ficha-${p.id}.pdf`);
      };

      // ============== UI ==============
      return (
        <div className="min-h-screen bg-white text-slate-800">
          {/* Top Bar */}
          <header className="sticky top-0 z-40 w-full border-b bg-white/80 backdrop-blur">
            <div className="mx-auto flex max-w-7xl items-center justify-between px-4 py-3 sm:px-6">
              <div className="flex items-center gap-3">
                <div className="h-10 w-10 rounded-2xl bg-emerald-600/90 flex items-center justify-center shadow text-white font-bold">ME</div>
                <div>
                  <h1 className="text-lg font-semibold leading-tight">Manabí Expats</h1>
                  <p className="text-xs text-slate-500 -mt-1">Compra de inmuebles en Manta y alrededores</p>
                </div>
              </div>
              <nav className="hidden gap-6 md:flex text-sm">
                <a href="#catalogo" className="hover:text-emerald-700">Catálogo</a>
                <a href="#por-que" className="hover:text-emerald-700">¿Por qué Manabí?</a>
                <a href="#flujo" className="hover:text-emerald-700">Cómo funciona</a>
                <a href="#servicios" className="hover:text-emerald-700">Servicios</a>
                <a href="#faq" className="hover:text-emerald-700">FAQ</a>
              </nav>
              <div className="flex items-center gap-3">
                <a href="#contacto" className="hidden md:inline-flex rounded-xl border border-emerald-700 px-4 py-2 text-sm font-medium text-emerald-700 hover:bg-emerald-50">Agendar llamada</a>
                <a href="#contacto" className="inline-flex rounded-xl bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-700">Quiero invertir</a>
              </div>
            </div>
          </header>

          {/* Hero con playa al atardecer */}
          <section className="relative overflow-hidden">
            <div className="absolute inset-0 -z-10 bg-gradient-to-b from-emerald-50 via-white to-white" />
            <div className="mx-auto grid max-w-7xl items-center gap-8 px-4 py-12 sm:px-6 md:grid-cols-2 md:py-20">
              <div>
                <span className="inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-white px-3 py-1 text-xs font-medium text-emerald-700 shadow-sm">Hecho para ecuatorianos en España</span>
                <h2 className="mt-4 text-3xl font-extrabold tracking-tight sm:text-4xl md:text-5xl">Invierte en <span className="text-emerald-700">playas de Manabí</span> desde España, con acompañamiento total</h2>
                <p className="mt-4 text-slate-600">Casas, departamentos y terrenos cerca de Manta, Santa Marianita, San Lorenzo y más. Infraestructura sólida, crecimiento sostenido y oportunidades reales de plusvalía.</p>
                <div className="mt-6 flex flex-wrap gap-3">
                  <a href="#catalogo" className="rounded-xl bg-emerald-600 px-5 py-3 text-sm font-semibold text-white shadow hover:bg-emerald-700">Ver catálogo</a>
                  <a href="#flujo" className="rounded-xl border border-slate-300 px-5 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50">Cómo te acompañamos</a>
                </div>
                <ul className="mt-6 grid gap-2 text-sm text-slate-600 sm:grid-cols-2">
                  <li className="flex items-start gap-2"><span className="mt-1 inline-block h-2 w-2 rounded-full bg-emerald-600"/>Asesoría legal y registral</li>
                  <li className="flex items-start gap-2"><span className="mt-1 inline-block h-2 w-2 rounded-full bg-emerald-600"/>Recorridos virtuales en vivo</li>
                  <li className="flex items-start gap-2"><span className="mt-1 inline-block h-2 w-2 rounded-full bg-emerald-600"/>Pagos y remesas seguras</li>
                  <li className="flex items-start gap-2"><span className="mt-1 inline-block h-2 w-2 rounded-full bg-emerald-600"/>Gestión de poderes y notaría</li>
                </ul>
              </div>
              <div className="relative">
                <div className="aspect-[4/3] w-full overflow-hidden rounded-3xl shadow-xl ring-1 ring-emerald-100">
                  <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=1400&auto=format&fit=crop" alt="Playa de Manabí al atardecer (referencial)" className="h-full w-full object-cover"/>
                </div>
              </div>
            </div>
          </section>

          {/* Barra de confianza */}
          <section className="border-y bg-slate-50">
            <div className="mx-auto grid max-w-7xl grid-cols-2 items-center gap-4 px-4 py-6 text-xs sm:grid-cols-4 sm:text-sm md:px-6">
              <div className="font-semibold text-slate-700">Due diligence registral</div>
              <div className="text-slate-600">Títulos verificados y libre de gravámenes*</div>
              <div className="font-semibold text-slate-700">Equipo local + España</div>
              <div className="text-slate-600">Trámite remoto y firma con poder</div>
            </div>
          </section>

          {/* Catálogo dinámico */}
          <section id="catalogo" className="mx-auto max-w-7xl px-4 py-12 sm:px-6 md:py-16">
            <div className="flex flex-wrap items-end justify-between gap-4">
              <div>
                <h3 className="text-2xl font-bold">Catálogo de inmuebles</h3>
                <p className="mt-1 text-slate-600">Videos, ficha técnica y descarga en PDF por propiedad.</p>
              </div>
              <a href="#contacto" className="rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Pedir catálogo completo</a>
            </div>

            <div className="mt-6 grid gap-3 sm:grid-cols-3">
              <input value={busqueda} onChange={(e)=>setBusqueda(e.target.value)} className="rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring" placeholder="Buscar por título, zona o tipo…"/>
              <select value={filtroTipo} onChange={(e)=>setFiltroTipo(e.target.value)} className="rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring">
                <option>Todos</option>
                <option>Casa</option>
                <option>Departamento</option>
                <option>Terreno productivo</option>
              </select>
              <select value={filtroPrecio} onChange={(e)=>setFiltroPrecio(e.target.value)} className="rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring">
                <option value="Todos">Todos los precios</option>
                <option value="≤80k">≤ $80.000</option>
                <option value="80–150k">$80.000 – $150.000</option>
                <option value="150–300k">$150.000 – $300.000</option>
                <option value="300k+">$300.000+</option>
              </select>
            </div>

            <div className="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
              {listaFiltrada.map((p) => (
                <article key={p.id} className="group overflow-hidden rounded-3xl border shadow-sm ring-1 ring-slate-100">
                  <div className="relative aspect-[4/3] overflow-hidden cursor-zoom-in" role="button" onClick={()=>setSeleccionada(p)}>
                    <img src={p.coverImage} alt={p.title} className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"/>
                    <div className="absolute left-3 top-3 flex items-center gap-2">
                      <span className="rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-emerald-700 shadow">{p.type}</span>
                      {p.status !== 'Disponible' && (
                        <span className="rounded-full bg-amber-500/90 px-3 py-1 text-xs font-semibold text-white shadow">{p.status}</span>
                      )}
                    </div>
                    <div className="absolute bottom-3 right-3 rounded-full bg-black/55 px-2 py-1 text-xs font-medium text-white backdrop-blur-sm">
                      📷 {p.gallery?.length || 0}
                    </div>
                  </div>
                  <div className="space-y-3 p-5">
                    <h4 className="text-base font-semibold text-slate-800">{p.title}</h4>
                    <p className="text-sm text-slate-600">{p.location}</p>
                    <p className="text-sm text-slate-600">
                      {p.beds ? `${p.beds}D` : ''}{p.beds && p.baths ? ' · ' : ''}{p.baths ? `${p.baths}B` : ''}
                      {(p.beds||p.baths) && (p.area_m2||p.lot_m2) ? ' · ' : ''}
                      {p.area_m2 ? `${p.area_m2} m² cubiertos` : ''}{p.area_m2 && p.lot_m2 ? ' · ' : ''}{p.lot_m2 ? `${new Intl.NumberFormat('es-EC').format(p.lot_m2)} m² lote` : ''}
                    </p>
                    <div className="flex flex-wrap gap-2">
                      {p.tags?.map((t, i)=>(
                        <span key={i} className="rounded-full bg-slate-100 px-2.5 py-1 text-xs font-medium text-slate-600">{t}</span>
                      ))}
                    </div>
                    <div className="flex items-center justify-between pt-1">
                      <span className="text-sm font-bold text-emerald-700">{formatPrice(p)}</span>
                      <div className="flex items-center gap-2">
                        {p.gallery?.length > 0 && (
                          <button onClick={()=>setSeleccionada(p)} className="rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50">Ver fotos</button>
                        )}
                        {p.videoUrl && (
                          <button onClick={()=>setSeleccionada(p)} className="rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50">Ver video</button>
                        )}
                        <button onClick={()=>downloadFichaPDF(p)} className="rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50">Descargar PDF</button>
                        <a href={`https://wa.me/34636526898?text=${encodeURIComponent('Hola Adolfo, quiero más detalles de: ' + p.title)}`} target="_blank" rel="noopener noreferrer" className="rounded-lg bg-emerald-600 px-3 py-2 text-xs font-semibold text-white hover:bg-emerald-700">Quiero info</a>
                      </div>
                    </div>
                  </div>
                </article>
              ))}
            </div>

            {/* Modal de video + Ficha técnica + Carrusel */}
            {seleccionada && (
              <div className="fixed inset-0 z-50 grid place-items-center bg-black/60 p-4" onClick={()=>setSeleccionada(null)}>
                <div className="w-full max-w-3xl rounded-2xl bg-white p-3 shadow-2xl" onClick={(e)=>e.stopPropagation()}>
                  <div className="flex flex-wrap items-center justify-between gap-3 p-2">
                    <h5 className="text-sm font-semibold text-slate-800">{seleccionada.title}</h5>
                    <div className="flex gap-2">
                      <button className="rounded-lg border px-2 py-1 text-xs hover:bg-slate-50" onClick={()=>setMostrarFicha(v=>!v)}>
                        {mostrarFicha ? 'Ocultar Ficha' : 'Ficha Técnica'}
                      </button>
                      <button className="rounded-lg border px-2 py-1 text-xs hover:bg-slate-50" onClick={()=>downloadFichaPDF(seleccionada)}>
                        Descargar PDF
                      </button>
                      <button className="rounded-lg border px-2 py-1 text-xs hover:bg-slate-50" onClick={()=>setSeleccionada(null)}>Cerrar</button>
                    </div>
                  </div>
                  <div className="overflow-hidden rounded-xl">
                    {renderVideo(normalizeVideoUrl(seleccionada.videoUrl)) || (
                      <div className="aspect-video grid place-items-center text-sm text-slate-500">Sin video</div>
                    )}
                  </div>
                  {mostrarFicha && (
                    <div className="mt-3 rounded-xl border p-4 text-sm text-slate-700">
                      <div className="grid gap-2 sm:grid-cols-2">
                        <div><span className="font-semibold">Ubicación:</span> {seleccionada.location}</div>
                        <div><span className="font-semibold">Tipo:</span> {seleccionada.type}</div>
                        <div><span className="font-semibold">Dormitorios:</span> {seleccionada.beds ?? '-'}</div>
                        <div><span className="font-semibold">Baños:</span> {seleccionada.baths ?? '-'}</div>
                        <div><span className="font-semibold">Área construida:</span> {seleccionada.area_m2 ?? '-'} m²</div>
                        <div><span className="font-semibold">Área de terreno:</span> {seleccionada.lot_m2 ? new Intl.NumberFormat('es-ES').format(seleccionada.lot_m2) : '-'} m²</div>
                        <div><span className="font-semibold">Precio:</span> {formatPrice(seleccionada)}</div>
                        <div><span className="font-semibold">Estado:</span> {seleccionada.status}</div>
                      </div>
                      {seleccionada.tags?.length ? (
                        <div className="mt-2"><span className="font-semibold">Tags:</span> {seleccionada.tags.join(' · ')}</div>
                      ) : null}
                      {seleccionada.notes ? (
                        <div className="mt-2"><span className="font-semibold">Notas:</span> {seleccionada.notes}</div>
                      ) : null}
                    </div>
                  )}
                  {seleccionada.gallery && seleccionada.gallery.length > 0 && (
                    <div className="mt-3">
                      <div className="relative">
                        <div className="aspect-[16/9] w-full overflow-hidden rounded-xl ring-1 ring-slate-200">
                          <img src={seleccionada.gallery[slideIndex]} alt={`Foto ${slideIndex+1} de ${seleccionada.title}`} className="h-full w-full object-cover"/>
                        </div>
                        <button onClick={() => setSlideIndex((i) => (i - 1 + seleccionada.gallery.length) % seleccionada.gallery.length)} className="absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 px-3 py-2 text-lg shadow ring-1 ring-slate-200">‹</button>
                        <button onClick={() => setSlideIndex((i) => (i + 1) % seleccionada.gallery.length)} className="absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 px-3 py-2 text-lg shadow ring-1 ring-slate-200">›</button>
                      </div>
                      <div className="mt-2 flex gap-2 overflow-x-auto">
                        {seleccionada.gallery.map((src, i) => (
                          <button key={i} onClick={() => setSlideIndex(i)} className={`h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg ring-2 ${i===slideIndex ? 'ring-emerald-600' : 'ring-transparent'}`}>
                            <img src={src} alt={`Miniatura ${i+1}`} className="h-full w-full object-cover"/>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
              </div>
            )}
          </section>

          {/* ¿Por qué Manabí? */}
          <section id="por-que" className="relative overflow-hidden border-y bg-gradient-to-b from-white to-emerald-50/40">
            <div className="mx-auto grid max-w-7xl items-center gap-10 px-4 py-14 sm:px-6 md:grid-cols-2">
              <div className="order-2 md:order-1">
                <h3 className="text-2xl font-bold">¿Por qué invertir en Manabí?</h3>
                <ul className="mt-4 space-y-3 text-slate-700">
                  <li className="flex gap-3"><span className="mt-2 h-2 w-2 rounded-full bg-emerald-600"/>Infraestructura: aeropuerto en Manta, malecón, hospitales y universidades.</li>
                  <li className="flex gap-3"><span className="mt-2 h-2 w-2 rounded-full bg-emerald-600"/>Demanda turística y residencial creciente.</li>
                  <li className="flex gap-3"><span className="mt-2 h-2 w-2 rounded-full bg-emerald-600"/>Desde lotes con vistas hasta departamentos frente al mar.</li>
                  <li className="flex gap-3"><span className="mt-2 h-2 w-2 rounded-full bg-emerald-600"/>Costo-valor competitivo frente a otros destinos.</li>
                </ul>
                <a href="#contacto" className="mt-6 inline-flex rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Explorar opciones para mí</a>
              </div>
              <div className="order-1 md:order-2">
                <div className="aspect-[4/3] overflow-hidden rounded-3xl shadow-xl ring-1 ring-emerald-100">
                  <img src="https://images.unsplash.com/photo-1493558103817-58b2924bce98?q=80&w=1400&auto=format&fit=crop" alt="Panorámica de la ciudad de Manta (referencial)" className="h-full w-full object-cover"/>
                </div>
              </div>
            </div>
          </section>

          {/* Cómo funciona */}
          <section id="flujo" className="mx-auto max-w-7xl px-4 py-14 sm:px-6">
            <h3 className="text-2xl font-bold">Cómo te acompañamos, paso a paso</h3>
            <div className="mt-8 grid gap-6 md:grid-cols-4">
              {[
                { step:'1', title:'Llamada de descubrimiento', text:'Entendemos tu presupuesto, objetivos y uso.' },
                { step:'2', title:'Curaduría y recorrido virtual', text:'Agenda de propiedades en vivo y comparativos.' },
                { step:'3', title:'Due diligence y oferta', text:'Verificación legal/registral y negociación.' },
                { step:'4', title:'Firma y post-venta', text:'Firma por poder, registro, amueblamiento y arriendo.' },
              ].map((s,i)=>(
                <div key={i} className="rounded-3xl border p-6 shadow-sm ring-1 ring-slate-100">
                  <div className="flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-600 text-sm font-bold text-white">{s.step}</div>
                  <h4 className="mt-4 text-base font-semibold">{s.title}</h4>
                  <p className="mt-2 text-sm text-slate-600">{s.text}</p>
                </div>
              ))}
            </div>
          </section>

          {/* Servicios (incluye Due Diligence) */}
          <section id="servicios" className="relative overflow-hidden border-y bg-slate-50">
            <div className="mx-auto max-w-7xl px-4 py-14 sm:px-6">
              <h3 className="text-2xl font-bold">Servicios para invertir desde España</h3>
              <div className="mt-8 grid gap-6 md:grid-cols-4">
                {[
                  { title:'Due diligence registral y legal', text:'Revisión de dominio, gravámenes, linderos, historial y situación municipal/condominial.' },
                  { title:'Representación y poderes', text:'Coordinación notarial, apostillas y representación legal a distancia.' },
                  { title:'Financiamiento y pagos', text:'Opciones de pago, remesas seguras y conexión con aliados.' },
                  { title:'Gestión de arriendo', text:'Puesta a punto, amueblamiento y administración de alquiler.' },
                ].map((c,i)=>(
                  <div key={i} className="rounded-3xl border bg-white p-6 shadow-sm ring-1 ring-slate-100">
                    <h4 className="text-base font-semibold">{c.title}</h4>
                    <p className="mt-2 text-sm text-slate-600">{c.text}</p>
                  </div>
                ))}
              </div>
              <div className="mt-8 rounded-3xl border bg-emerald-600/95 p-6 text-white shadow">
                <p className="text-sm font-medium">¿Eres agente o promotor en Manta?</p>
                <div className="mt-1 flex flex-wrap items-center justify-between gap-3">
                  <p className="text-sm/6 opacity-95">Sumemos inventario validado con transparencia y servicio.</p>
                  <a href="#contacto" className="rounded-xl bg-white px-4 py-2 text-sm font-semibold text-emerald-700 hover:bg-emerald-50">Quiero ser aliado</a>
                </div>
              </div>
            </div>
          </section>

          {/* Testimonios */}
          <section className="mx-auto max-w-7xl px-4 py-14 sm:px-6">
            <h3 className="text-2xl font-bold">Historias reales</h3>
            <div className="mt-6 grid gap-6 md:grid-cols-3">
              {[
                "Compré mi primer lote en Santa Marianita desde Madrid. El proceso fue claro y la firma por poder salió perfecta.",
                "Nos ayudaron a comparar edificios frente al mar en Manta y cerramos una renta anual al mes de comprar.",
                "Soy ecuatoriana en Barcelona; ahora tengo un lugar para volver cada verano en San Lorenzo."
              ].map((t, i)=>(
                <figure key={i} className="rounded-3xl border p-6 shadow-sm ring-1 ring-slate-100">
                  <blockquote className="text-sm text-slate-700">“{t}”</blockquote>
                  <figcaption className="mt-4 text-xs text-slate-500">Cliente verificado</figcaption>
                </figure>
              ))}
            </div>
          </section>

          {/* Contacto con Formspree */}
          <section id="contacto" className="relative overflow-hidden border-y bg-gradient-to-b from-emerald-50/60 to-white">
            <div className="mx-auto max-w-7xl px-4 py-14 sm:px-6">
              <div className="grid items-start gap-10 md:grid-cols-2">
                <div>
                  <h3 className="text-2xl font-bold">Cuéntanos qué buscas</h3>
                  <p className="mt-2 text-slate-600">Te enviamos un catálogo a medida y agendamos un recorrido virtual. Sin spam, sin presión.</p>
                  <ul className="mt-6 space-y-2 text-sm text-slate-700">
                    <li>• Presupuesto y zona preferida (Manta, Santa Marianita, San Lorenzo…)</li>
                    <li>• Tipo: casa, departamento o terreno</li>
                    <li>• Objetivo: inversión, vacacional o vivienda</li>
                  </ul>
                  <div className="mt-6 rounded-2xl bg-white p-4 text-xs text-slate-500 shadow ring-1 ring-slate-100">
                    * Toda compra se sujeta a verificación legal y registral en Ecuador.
                  </div>
                </div>
                <form action="https://formspree.io/f/xdknqnjl" method="POST" className="rounded-3xl border bg-white p-6 shadow-sm ring-1 ring-slate-100">
                  <div className="grid gap-4">
                    <div>
                      <label className="text-xs font-semibold text-slate-600">Nombre y Apellidos</label>
                      <input name="nombre" required className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring" placeholder="Tu nombre"/>
                    </div>
                    <div className="grid gap-4 sm:grid-cols-2">
                      <div>
                        <label className="text-xs font-semibold text-slate-600">Email</label>
                        <input type="email" name="email" required className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring" placeholder="tu@email.com"/>
                      </div>
                      <div>
                        <label className="text-xs font-semibold text-slate-600">WhatsApp</label>
                        <input name="whatsapp" className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring" placeholder="+34 …"/>
                      </div>
                    </div>
                    <div className="grid gap-4 sm:grid-cols-2">
                      <div>
                        <label className="text-xs font-semibold text-slate-600">Presupuesto aprox.</label>
                        <select name="presupuesto" className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring">
                          <option>Hasta $80.000</option>
                          <option>$80.000 – $150.000</option>
                          <option>$150.000 – $300.000</option>
                          <option>$300.000+</option>
                        </select>
                      </div>
                      <div>
                        <label className="text-xs font-semibold text-slate-600">Tipo de inmueble</label>
                        <select name="tipo" className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring">
                          <option>Departamento</option>
                          <option>Casa</option>
                          <option>Terreno</option>
                          <option>Mixto / Indeciso</option>
                        </select>
                      </div>
                    </div>
                    <div>
                      <label className="text-xs font-semibold text-slate-600">Mensaje</label>
                      <textarea name="mensaje" rows="4" className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none ring-emerald-200 focus:ring" placeholder="Cuéntanos zonas, tiempos y si ya tienes algo visto…"></textarea>
                    </div>
                    <div className="flex items-start gap-2 rounded-xl bg-emerald-50/40 p-3 ring-1 ring-emerald-100">
                      <input id="rgpd" type="checkbox" required className="mt-1"/>
                      <label htmlFor="rgpd" className="text-xs text-slate-600">Acepto la <a href="#privacidad" className="font-semibold text-emerald-700 hover:underline">Política de Privacidad</a> y el uso de mis datos para contacto comercial.</label>
                    </div>
                    <button type="submit" className="rounded-xl bg-emerald-600 px-5 py-3 text-sm font-semibold text-white shadow hover:bg-emerald-700">Enviar</button>
                  </div>
                </form>
              </div>
            </div>
          </section>

          {/* FAQ */}
          <section id="faq" className="mx-auto max-w-7xl px-4 py-14 sm:px-6">
            <h3 className="text-2xl font-bold">Preguntas frecuentes</h3>
            <div className="mt-6 grid gap-4 md:grid-cols-2">
              {[
                { q:'¿Puedo comprar desde España?', a:'Sí. Puedes coordinar firma en Ecuador o mediante poder, con asesoría notarial y apostillas.'},
                { q:'¿Cómo se garantiza la legalidad?', a:'Hacemos due diligence: revisión de dominio, gravámenes, linderos y situación municipal/condominial.'},
                { q:'¿Gestionan arriendos?', a:'Sí, contamos con aliados para alquiler vacacional y anual, además de puesta a punto y amueblamiento.'},
                { q:'¿Qué costos adicionales hay?', a:'Impuestos, notaría, registro y honorarios. Te entregamos un presupuesto detallado antes de firmar.'},
              ].map((f, i)=>(
                <details key={i} className="group rounded-2xl border p-4">
                  <summary className="cursor-pointer list-none font-medium text-slate-800">{f.q}</summary>
                  <p className="mt-2 text-sm text-slate-600">{f.a}</p>
                </details>
              ))}
            </div>
          </section>

          {/* Footer */}
          <footer className="border-t bg-white">
            <div className="mx-auto max-w-7xl px-4 py-10 sm:px-6">
              <div className="grid gap-8 md:grid-cols-4">
                <div>
                  <div className="flex items-center gap-2">
                    <div className="h-9 w-9 rounded-xl bg-emerald-600/90 flex items-center justify-center text-white text-sm font-bold">ME</div>
                    <span className="font-semibold">Manabí Expats</span>
                  </div>
                  <p className="mt-3 text-sm text-slate-600">Acompañamiento integral para ecuatorianos en España que invierten en la costa de Manabí.</p>
                </div>
                <div>
                  <h5 className="text-sm font-semibold">Explora</h5>
                  <ul className="mt-2 space-y-2 text-sm text-slate-600">
                    <li><a href="#catalogo" className="hover:text-emerald-700">Catálogo</a></li>
                    <li><a href="#por-que" className="hover:text-emerald-700">¿Por qué Manabí?</a></li>
                    <li><a href="#servicios" className="hover:text-emerald-700">Servicios</a></li>
                    <li><a href="#faq" className="hover:text-emerald-700">FAQ</a></li>
                  </ul>
                </div>
                <div>
                  <h5 className="text-sm font-semibold">Contacto</h5>
                  <ul className="mt-2 space-y-2 text-sm text-slate-600">
                    <li>Email: <a className="underline decoration-dotted" href="mailto:adolfocevallos@gmail.com">adolfocevallos@gmail.com</a></li>
                    <li>WhatsApp: <a className="underline decoration-dotted hover:text-emerald-700" href="https://wa.me/34636526898" target="_blank" rel="noopener noreferrer">+34 636526898</a></li>
                    <li>Manta – Ecuador · España</li>
                  </ul>
                </div>
                <div>
                  <h5 className="text-sm font-semibold">Legal</h5>
                  <p className="mt-2 text-xs text-slate-500">La información es referencial. Disponibilidad y precios pueden variar sin previo aviso. Operamos con aliados legales en Ecuador y España.</p>
                  <p className="mt-2 text-xs"><a href="#privacidad" className="underline decoration-dotted hover:text-emerald-700">Política de Privacidad</a></p>
                </div>
              </div>
              <div className="mt-8 border-t pt-4 text-xs text-slate-500">© <span id="year"></span> Manabí Expats. Todos los derechos reservados.</div>
            </div>
          </footer>

          {/* Privacidad */}
          <section id="privacidad" className="mx-auto max-w-7xl px-4 py-12 sm:px-6">
            <h3 className="text-2xl font-bold">Política de Privacidad (resumen)</h3>
            <p className="mt-2 text-sm text-slate-600">
              Manabí Expats trata tus datos (nombre, email, teléfono y preferencias) únicamente para atender tu solicitud de información inmobiliaria.
              Base legal: tu consentimiento. Conservación: 12 meses o hasta que solicites su eliminación.
              Derechos: acceso, rectificación, supresión, portabilidad y oposición escribiendo a
              <a className="font-semibold text-emerald-700" href="mailto:adolfocevallos@gmail.com"> adolfocevallos@gmail.com</a>.
              No cedemos datos a terceros salvo obligación legal o prestadores necesarios (p. ej. email/CRM) con contratos de encargo.
            </p>
          </section>

          {/* Botón flotante WhatsApp */}
          <a
            href="https://wa.me/34636526898?text=Hola%20Adolfo%2C%20quiero%20informaci%C3%B3n%20sobre%20propiedades%20en%20Manab%C3%AD!"
            target="_blank" rel="noopener noreferrer"
            className="fixed bottom-5 right-5 inline-flex items-center gap-2 rounded-full bg-emerald-600 px-4 py-3 text-sm font-semibold text-white shadow-lg hover:bg-emerald-700">
            Hablemos
          </a>

          {/* JSON-LD */}
          <script type="application/ld+json" dangerouslySetInnerHTML={{__html: JSON.stringify({
            '@context': 'https://schema.org',
            '@type': 'RealEstateAgent',
            name: 'Manabí Expats',
            areaServed: ['Manta','Santa Marianita','San Lorenzo','Manabí','España'],
            url: 'https://manabiexpats.com',
            email: 'adolfocevallos@gmail.com',
            telephone: '+34 636526898',
            sameAs: [],
            description: 'Acompañamiento integral para ecuatorianos en España que invierten en la costa de Manabí.'
          }) }} />
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ManabiExpatsLanding />);

    // año dinámico footer
    document.addEventListener('DOMContentLoaded', () => {
      const y = document.getElementById('year');
      if (y) y.textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>
